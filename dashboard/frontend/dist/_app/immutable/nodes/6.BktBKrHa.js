import{s as Ae,n as x,d as f,c as V,e as i,f as h,h as v,j as m,o as O,m as S,p as _,q as A,u as Ie,v as Ve,b as I,k,t as E,w as Ne,A as pe,B as me,l as Pe}from"../chunks/CROMKnEV.js";import{e as be}from"../chunks/D6YF6ztN.js";import{S as Te,i as Fe}from"../chunks/B0cu4CwU.js";import{f as ge}from"../chunks/Dbnniqku.js";import{f as M}from"../chunks/C3hJNHfY.js";function ye(l,e,s){const t=l.slice();return t[7]=e[s],t}function qe(l){let e,s=be(l[3]),t=[];for(let a=0;a<s.length;a+=1)t[a]=Ee(ye(l,s,a));return{c(){e=_("div");for(let a=0;a<t.length;a+=1)t[a].c();this.h()},l(a){e=v(a,"DIV",{class:!0});var r=m(e);for(let n=0;n<t.length;n+=1)t[n].l(r);r.forEach(f),this.h()},h(){h(e,"class","flows-grid svelte-1yhehbl")},m(a,r){V(a,e,r);for(let n=0;n<t.length;n+=1)t[n]&&t[n].m(e,null)},p(a,r){if(r&28){s=be(a[3]);let n;for(n=0;n<s.length;n+=1){const c=ye(a,s,n);t[n]?t[n].p(c,r):(t[n]=Ee(c),t[n].c(),t[n].m(e,null))}for(;n<t.length;n+=1)t[n].d(1);t.length=s.length}},d(a){a&&f(e),Ne(t,a)}}}function Le(l){let e,s='<p>No flows yet.</p> <p class="hint svelte-1yhehbl">Create a flow to start a sequence of experiments.</p>';return{c(){e=_("div"),e.innerHTML=s,this.h()},l(t){e=v(t,"DIV",{class:!0,"data-svelte-h":!0}),O(e)!=="svelte-q6wl19"&&(e.innerHTML=s),this.h()},h(){h(e,"class","empty svelte-1yhehbl")},m(t,a){V(t,e,a)},p:x,d(t){t&&f(e)}}}function He(l){let e,s;return{c(){e=_("div"),s=E(l[1]),this.h()},l(t){e=v(t,"DIV",{class:!0});var a=m(e);s=k(a,l[1]),a.forEach(f),this.h()},h(){h(e,"class","error svelte-1yhehbl")},m(t,a){V(t,e,a),i(e,s)},p(t,a){a&2&&I(s,t[1])},d(t){t&&f(e)}}}function Me(l){let e,s="Loading flows...";return{c(){e=_("div"),e.textContent=s,this.h()},l(t){e=v(t,"DIV",{class:!0,"data-svelte-h":!0}),O(e)!=="svelte-1pvqm06"&&(e.textContent=s),this.h()},h(){h(e,"class","loading svelte-1yhehbl")},m(t,a){V(t,e,a)},p:x,d(t){t&&f(e)}}}function we(l){let e,s=l[7].description+"",t;return{c(){e=_("p"),t=E(s),this.h()},l(a){e=v(a,"P",{class:!0});var r=m(e);t=k(r,s),r.forEach(f),this.h()},h(){h(e,"class","flow-description svelte-1yhehbl")},m(a,r){V(a,e,r),i(e,t)},p(a,r){r&8&&s!==(s=a[7].description+"")&&I(t,s)},d(a){a&&f(e)}}}function ke(l){let e,s,t="Template",a,r,n=l[7].config.template+"",c;return{c(){e=_("div"),s=_("span"),s.textContent=t,a=A(),r=_("span"),c=E(n),this.h()},l(o){e=v(o,"DIV",{class:!0});var d=m(e);s=v(d,"SPAN",{class:!0,"data-svelte-h":!0}),O(s)!=="svelte-ual0up"&&(s.textContent=t),a=S(d),r=v(d,"SPAN",{class:!0});var p=m(r);c=k(p,n),p.forEach(f),d.forEach(f),this.h()},h(){h(s,"class","meta-label svelte-1yhehbl"),h(r,"class","meta-value svelte-1yhehbl"),h(e,"class","meta-item svelte-1yhehbl")},m(o,d){V(o,e,d),i(e,s),i(e,a),i(e,r),i(r,c)},p(o,d){d&8&&n!==(n=o[7].config.template+"")&&I(c,n)},d(o){o&&f(e)}}}function je(l){let e,s,t=M(l[7].started_at)+"",a;return{c(){e=_("span"),s=E("Started: "),a=E(t),this.h()},l(r){e=v(r,"SPAN",{class:!0});var n=m(e);s=k(n,"Started: "),a=k(n,t),n.forEach(f),this.h()},h(){h(e,"class","date-item")},m(r,n){V(r,e,n),i(e,s),i(e,a)},p(r,n){n&8&&t!==(t=M(r[7].started_at)+"")&&I(a,t)},d(r){r&&f(e)}}}function Be(l){let e,s,t=M(l[7].completed_at)+"",a;return{c(){e=_("span"),s=E("Completed: "),a=E(t),this.h()},l(r){e=v(r,"SPAN",{class:!0});var n=m(e);s=k(n,"Completed: "),a=k(n,t),n.forEach(f),this.h()},h(){h(e,"class","date-item")},m(r,n){V(r,e,n),i(e,s),i(e,a)},p(r,n){n&8&&t!==(t=M(r[7].completed_at)+"")&&I(a,t)},d(r){r&&f(e)}}}function Ee(l){let e,s,t,a=l[7].name+"",r,n,c,o,d=l[7].status+"",p,D,w,j=l[2]===l[7].id?"...":"×",z,G,ee,J,N,T,F,ce="Experiments",te,L,B=Ce(l[7])+"",K,le,se,P,q,ae,U=M(l[7].created_at)+"",Q,ne,re,R,ie,fe;function Se(...C){return l[5](l[7],...C)}let b=l[7].description&&we(l),g=l[7].config.template&&ke(l);function he(C,u){if(C[7].completed_at)return Be;if(C[7].started_at)return je}let H=he(l),y=H&&H(l);return{c(){e=_("a"),s=_("div"),t=_("h3"),r=E(a),n=A(),c=_("div"),o=_("span"),p=E(d),D=A(),w=_("button"),z=E(j),ee=A(),b&&b.c(),J=A(),N=_("div"),T=_("div"),F=_("span"),F.textContent=ce,te=A(),L=_("span"),K=E(B),le=A(),g&&g.c(),se=A(),P=_("div"),q=_("span"),ae=E("Created: "),Q=E(U),ne=A(),y&&y.c(),re=A(),this.h()},l(C){e=v(C,"A",{href:!0,class:!0});var u=m(e);s=v(u,"DIV",{class:!0});var W=m(s);t=v(W,"H3",{class:!0});var de=m(t);r=k(de,a),de.forEach(f),n=S(W),c=v(W,"DIV",{class:!0});var X=m(c);o=v(X,"SPAN",{class:!0,style:!0});var ue=m(o);p=k(ue,d),ue.forEach(f),D=S(X),w=v(X,"BUTTON",{class:!0,title:!0});var ve=m(w);z=k(ve,j),ve.forEach(f),X.forEach(f),W.forEach(f),ee=S(u),b&&b.l(u),J=S(u),N=v(u,"DIV",{class:!0});var Y=m(N);T=v(Y,"DIV",{class:!0});var Z=m(T);F=v(Z,"SPAN",{class:!0,"data-svelte-h":!0}),O(F)!=="svelte-t5qmmb"&&(F.textContent=ce),te=S(Z),L=v(Z,"SPAN",{class:!0});var _e=m(L);K=k(_e,B),_e.forEach(f),Z.forEach(f),le=S(Y),g&&g.l(Y),Y.forEach(f),se=S(u),P=v(u,"DIV",{class:!0});var $=m(P);q=v($,"SPAN",{class:!0});var oe=m(q);ae=k(oe,"Created: "),Q=k(oe,U),oe.forEach(f),ne=S($),y&&y.l($),$.forEach(f),re=S(u),u.forEach(f),this.h()},h(){h(t,"class","flow-name svelte-1yhehbl"),h(o,"class","status-badge svelte-1yhehbl"),pe(o,"background",De(l[7].status)),h(w,"class","btn-delete svelte-1yhehbl"),h(w,"title","Delete flow"),w.disabled=G=l[2]===l[7].id,h(c,"class","flow-header-actions svelte-1yhehbl"),h(s,"class","flow-header svelte-1yhehbl"),h(F,"class","meta-label svelte-1yhehbl"),h(L,"class","meta-value svelte-1yhehbl"),h(T,"class","meta-item svelte-1yhehbl"),h(N,"class","flow-meta svelte-1yhehbl"),h(q,"class","date-item"),h(P,"class","flow-dates svelte-1yhehbl"),h(e,"href",R="/flows/"+l[7].id),h(e,"class","flow-card svelte-1yhehbl"),me(e,"deleting",l[2]===l[7].id)},m(C,u){V(C,e,u),i(e,s),i(s,t),i(t,r),i(s,n),i(s,c),i(c,o),i(o,p),i(c,D),i(c,w),i(w,z),i(e,ee),b&&b.m(e,null),i(e,J),i(e,N),i(N,T),i(T,F),i(T,te),i(T,L),i(L,K),i(N,le),g&&g.m(N,null),i(e,se),i(e,P),i(P,q),i(q,ae),i(q,Q),i(P,ne),y&&y.m(P,null),i(e,re),ie||(fe=Pe(w,"click",Se),ie=!0)},p(C,u){l=C,u&8&&a!==(a=l[7].name+"")&&I(r,a),u&8&&d!==(d=l[7].status+"")&&I(p,d),u&8&&pe(o,"background",De(l[7].status)),u&12&&j!==(j=l[2]===l[7].id?"...":"×")&&I(z,j),u&12&&G!==(G=l[2]===l[7].id)&&(w.disabled=G),l[7].description?b?b.p(l,u):(b=we(l),b.c(),b.m(e,J)):b&&(b.d(1),b=null),u&8&&B!==(B=Ce(l[7])+"")&&I(K,B),l[7].config.template?g?g.p(l,u):(g=ke(l),g.c(),g.m(N,null)):g&&(g.d(1),g=null),u&8&&U!==(U=M(l[7].created_at)+"")&&I(Q,U),H===(H=he(l))&&y?y.p(l,u):(y&&y.d(1),y=H&&H(l),y&&(y.c(),y.m(P,null))),u&8&&R!==(R="/flows/"+l[7].id)&&h(e,"href",R),u&12&&me(e,"deleting",l[2]===l[7].id)},d(C){C&&f(e),b&&b.d(),g&&g.d(),y&&y.d(),ie=!1,fe()}}}function Ue(l){let e,s,t='<h1 class="svelte-1yhehbl">Flows</h1> <a href="/flows/new" class="btn btn-primary svelte-1yhehbl">New Flow</a>',a;function r(o,d){return o[0]?Me:o[1]?He:o[3].length===0?Le:qe}let n=r(l),c=n(l);return{c(){e=_("div"),s=_("div"),s.innerHTML=t,a=A(),c.c(),this.h()},l(o){e=v(o,"DIV",{class:!0});var d=m(e);s=v(d,"DIV",{class:!0,"data-svelte-h":!0}),O(s)!=="svelte-1yk8xa2"&&(s.innerHTML=t),a=S(d),c.l(d),d.forEach(f),this.h()},h(){h(s,"class","page-header svelte-1yhehbl"),h(e,"class","container")},m(o,d){V(o,e,d),i(e,s),i(e,a),c.m(e,null)},p(o,[d]){n===(n=r(o))&&c?c.p(o,d):(c.d(1),c=n(o),c&&(c.c(),c.m(e,null)))},i:x,o:x,d(o){o&&f(e),c.d()}}}function Ce(l){var s;const e=(s=l==null?void 0:l.config)==null?void 0:s.experiments;return Array.isArray(e)?e.length:0}function De(l){switch(l){case"running":return"var(--accent-blue)";case"completed":return"var(--accent-green)";case"failed":return"var(--accent-red)";case"cancelled":return"var(--text-tertiary)";default:return"var(--text-secondary)"}}function Oe(l,e,s){let t;Ie(l,ge,p=>s(3,t=p));let a=!0,r=null,n=null;Ve(async()=>{await c()});async function c(){try{const p=await fetch("/api/flows");if(!p.ok)throw new Error("Failed to fetch flows");const D=await p.json();ge.set(D)}catch(p){s(1,r=p instanceof Error?p.message:"Unknown error")}finally{s(0,a=!1)}}async function o(p,D){if(p.preventDefault(),p.stopPropagation(),!!confirm(`Delete flow "${D.name}"? This cannot be undone.`)){s(2,n=D.id);try{if(!(await fetch(`/api/flows/${D.id}`,{method:"DELETE"})).ok)throw new Error("Failed to delete flow");await c()}catch(w){s(1,r=w instanceof Error?w.message:"Failed to delete")}finally{s(2,n=null)}}}return[a,r,n,t,o,(p,D)=>o(D,p)]}class Re extends Te{constructor(e){super(),Fe(this,e,Oe,Ue,Ae,{})}}export{Re as component};
